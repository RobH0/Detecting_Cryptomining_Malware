const puppeteer = require('puppeteer');
const opn = require('open');

opn('https://robh0.github.io/HostedCryptoWebsite/', {app: 'chrome'});
(async () => {
  const browser = await puppeteer.launch();
  const page = await browser.newPage();
  await page.goto('https://robh0.github.io/HostedCryptoWebsite/');
  await page.screenshot({path: 'visited.png'});
  try{
    console.log("trying to click");
    //let selector = '[name="startMining"]';
    await page.mouse.click(500, 100, {button:'left'});//click needs to be fixed.
    //await page.evaluate((selector) => document.querySelector(selector).click(), selector);
    console.log("Button clicked");
  }catch (e){
    console.log("Clicking start mining button failed\n");
    console.log(e+'\n');
  }
  var perf = await page.metrics();
  console.log(JSON.stringify(perf));
  await browser.close();
})();
