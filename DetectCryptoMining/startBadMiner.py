# finds and starts miner
import shutil
import os


class AutoMiner:

    def __init__(self):
        self.minerName = 'xmrig.exe'

    # Finds miner within windows file system.
    def findMiner(self):
        # code modified from:
        # https://stackoverflow.com/questions/13067686/search-files-in-all-drives-using-python
        for root, dirs, files in os.walk("C:\\Users\\"):
            for file in files:
                if file == self.minerName:
                    print("Miner executable found")
                    return os.path.join(root, file)

    # Starts the miner using the miner's path found by findMiner() while
    # providing the correct configuration input.
    def startMiner(self):
        minerPath = self.findMiner()
        try:
            print("starting miner")
            os.system(minerPath + " --donate-level 1 -o pool.minexmr.com:443 -u 45gTQ52CRReD6HBCx9dQF4BWQeMSNDbjn55ZZpH6rSMEJZq5rdoL8UBKtP8YHmtCnZGQzxodrxWQAU1C5jQ48dEdTGnX24P -k --tls")
        except:
            print("No miner executable was found to be started for testing!")


if __name__ == '__main__':
    auto = AutoMiner()
    auto.startMiner()
